<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>PDF äº‚ç¢¼ä¿®å¾©æ¸¬è©¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .btn { padding: 15px 30px; font-size: 16px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px; }
        .btn:hover { background: #0056b3; }
        .result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>ğŸ”§ PDF äº‚ç¢¼ä¿®å¾©æ¸¬è©¦</h1>
    <p>æ¸¬è©¦æ–°çš„ ASCII è½‰æ›ç³»çµ±æ˜¯å¦è§£æ±ºäº†ä¸­æ–‡äº‚ç¢¼å•é¡Œ</p>
    
    <div>
        <button class="btn" onclick="testPDFConversion()">ğŸš€ æ¸¬è©¦ PDF è½‰æ›</button>
        <button class="btn" onclick="clearResults()">æ¸…é™¤çµæœ</button>
    </div>
    
    <div id="results"></div>

    <!-- è¼‰å…¥è½‰æ›å™¨ -->
    <script src="assets/js/converters/document.js"></script>

    <script>
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `
                <strong>${new Date().toLocaleTimeString()}</strong> - ${message}
            `;
            document.getElementById('results').appendChild(div);
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        async function testPDFConversion() {
            log('ğŸ”„ é–‹å§‹ PDF è½‰æ›æ¸¬è©¦...');
            
            try {
                // æª¢æŸ¥ DocumentConverter æ˜¯å¦è¼‰å…¥
                if (typeof DocumentConverter === 'undefined') {
                    log('âŒ DocumentConverter æœªè¼‰å…¥', 'error');
                    return;
                }
                
                log('âœ… DocumentConverter å·²è¼‰å…¥');
                
                // æ¸¬è©¦å…§å®¹ï¼ˆåŒ…å«ä¸­æ–‡ï¼‰
                const testTitle = 'æœ€çµ‚é©—è­‰æ¸¬è©¦æ–‡ä»¶';
                const testContent = `é€™æ˜¯ä¸€å€‹ç”¨æ–¼é©—è­‰ PDF è½‰æ›åŠŸèƒ½çš„æ¸¬è©¦æ–‡ä»¶ã€‚

åŠŸèƒ½é©—è­‰é …ç›®ï¼š
â€¢ ä¸­æ–‡å­—ç¬¦æ”¯æ´æ¸¬è©¦
â€¢ ç‰¹æ®Šå­—ç¬¦è™•ç†ï¼š& < > " '
â€¢ å¤šæ®µè½æ ¼å¼é©—è­‰
â€¢ é•·æ–‡æœ¬è™•ç†èƒ½åŠ›æ¸¬è©¦

æ¸¬è©¦æ™‚é–“ï¼š${new Date().toLocaleString()}

é€™å€‹æ¸¬è©¦å°‡é©—è­‰æ–°çš„ ASCII è½‰æ›ç³»çµ±æ˜¯å¦èƒ½å¤ ï¼š
1. æ­£ç¢ºè½‰æ›ä¸­æ–‡æ–‡å­—ç‚ºè‹±æ–‡
2. è™•ç†æ¨™é»ç¬¦è™Ÿå’Œç‰¹æ®Šå­—ç¬¦
3. ä¿æŒæ–‡æœ¬æ ¼å¼å’Œçµæ§‹
4. ç”Ÿæˆå¯è®€çš„ PDF æª”æ¡ˆ`;

                log(`ğŸ“ æ¸¬è©¦æ¨™é¡Œï¼š${testTitle}`);
                log(`ğŸ“„ å…§å®¹é•·åº¦ï¼š${testContent.length} å­—ç¬¦`);
                
                // åŸ·è¡Œ PDF è½‰æ›
                log('ğŸ”„ åŸ·è¡Œ PDF è½‰æ›...');
                const pdfBlob = await DocumentConverter.convertToPdf(testContent, testTitle);
                
                if (pdfBlob && pdfBlob.size > 0) {
                    log(`âœ… PDF è½‰æ›æˆåŠŸï¼æª”æ¡ˆå¤§å°ï¼š${pdfBlob.size} bytes`, 'success');
                    
                    // è‡ªå‹•ä¸‹è¼‰
                    const url = URL.createObjectURL(pdfBlob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'ascii-conversion-test.pdf';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    setTimeout(() => URL.revokeObjectURL(url), 1000);
                    
                    log('ğŸ“¥ PDF æª”æ¡ˆå·²è‡ªå‹•ä¸‹è¼‰', 'success');
                    log('ğŸ¯ è«‹é–‹å•Ÿä¸‹è¼‰çš„ PDF æª”æ¡ˆæª¢æŸ¥æ˜¯å¦é‚„æœ‰äº‚ç¢¼', 'info');
                    
                } else {
                    log('âŒ PDF è½‰æ›å¤±æ•—ï¼šç”¢ç”Ÿç©ºæª”æ¡ˆ', 'error');
                }
                
            } catch (error) {
                log(`âŒ PDF è½‰æ›éŒ¯èª¤ï¼š${error.message}`, 'error');
                console.error('è©³ç´°éŒ¯èª¤:', error);
            }
        }

        // é é¢è¼‰å…¥æ™‚æª¢æŸ¥ç‹€æ…‹
        window.addEventListener('load', function() {
            log('ğŸš€ æ¸¬è©¦é é¢å·²è¼‰å…¥');
            
            setTimeout(() => {
                if (typeof DocumentConverter !== 'undefined') {
                    log('âœ… DocumentConverter è¼‰å…¥æˆåŠŸ', 'success');
                } else {
                    log('âŒ DocumentConverter è¼‰å…¥å¤±æ•—', 'error');
                }
            }, 500);
        });
    </script>
</body>
</html>